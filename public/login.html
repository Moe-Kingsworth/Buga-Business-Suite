<!DOCTYPE html>
<html lang="en">
<head>
  <title>Login</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="login.css" />
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.9/css/unicons.css" />
  <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
</head>
<body>
  <div class="section">
    <div class="container">
      <div class="row full-height justify-content-center">
        <div class="col-12 text-center align-self-center py-5">
          <div class="section pb-5 pt-5 pt-sm-2 text-center">
            <h6 class="mb-0 pb-3"><span>Log In</span><span>Sign Up</span></h6>
            <input class="checkbox" type="checkbox" id="reg-log" name="reg-log" />
            <label for="reg-log"></label>
            <div class="card-3d-wrap mx-auto">
              <div class="card-3d-wrapper">

                <!-- Login Card -->
                <div class="card-front">
                  <div class="center-wrap">
                    <div class="section text-center">
                      <h4 class="mb-4 pb-3">Log In</h4>
                      <form id="loginForm" onsubmit="return loginUser(event)">
                        <div class="form-group">
                          <input type="email" name="logemail" class="form-style login-field" placeholder="Your Email" id="logemail" autocomplete="off" required />
                          <i class="input-icon uil uil-at"></i>
                        </div>

                        <div class="form-group mt-2">
                          <input type="password" name="logpass" class="form-style login-field" placeholder="Your Password" id="logpass" autocomplete="off" required />
                            <i
    class="uil uil-eye password-toggle"
    onclick="togglePassword('logpass', this)"
    style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #002e6b;"
  ></i>
                        </div>

                        <button type="submit" class="btn mt-4">Login</button>

                        <p class="mb-0 mt-4 text-center">
                          <a href="#0" class="link">Forgot your password?</a>
                        </p>
                      </form>
                    </div>
                  </div>
                </div>

                <!-- Signup Card -->
                <div class="card-back">
                  <div class="center-wrap">
                    <form id="signupForm" class="section text-center">
                      <!-- Step 1 -->
                      <div class="signup-step" id="step-1">
  <h4 class="mb-4 pb-3">Sign Up</h4>

  <div class="form-group mb-3">
    <input type="text" name="name" class="form-style signup-field" placeholder="Full Name" required />
    <i class="input-icon uil uil-user"></i>
  </div>

  <div class="form-group mb-3">
    <input type="text" name="phone" class="form-style signup-field" placeholder="Phone Number" required />
    <i class="input-icon uil uil-phone"></i>
  </div>

  <div class="form-group mb-3">
    <input type="email" name="email" class="form-style signup-field" placeholder="Email Address" required />
    <i class="input-icon uil uil-at"></i>
  </div>

  <button type="button" class="btn mt-4" onclick="nextStep(1)">Next</button>
</div>

<!-- Step 2 -->
                      <div class="signup-step d-none" id="step-2">
                        <h4 class="mb-1 pb-1">Business Info</h4>

                        <div class="form-group">
                          <input type="text" name="business_name" class="form-style signup-field" placeholder="Business Name" required />
                          <i class="input-icon uil uil-building"></i>
                        </div>

                        <div class="form-group mt-2">
                          <input type="text" name="business_address" class="form-style signup-field" placeholder="Business Address" required />
                          <i class="input-icon uil uil-location-point"></i>
                        </div>

                        <div class="form-group mt-2">
                          <input type="text" name="city" class="form-style signup-field" placeholder="City" required />
                          <i class="input-icon uil uil-location-arrow"></i>
                        </div>

                        <div class="form-group mt-2">
                          <input type="text" name="state" class="form-style signup-field" placeholder="State" required />
                          <i class="input-icon uil uil-map"></i>
                        </div>

                        <div class="form-group mt-2">
                          <input type="text" name="business_type" class="form-style signup-field" placeholder="Type of Business" required />
                          <i class="input-icon uil uil-briefcase-alt"></i>
                        </div>

                        <button type="button" class="btn mt-4" onclick="nextStep(2)">Next</button>
                      </div>
        
                    
 <!-- Step 3 -->
<div class="signup-step d-none" id="step-3">
  <h4 class="mb-4 pb-3">Set Your Password</h4>

  <div class="form-group position-relative">
    <input type="password" id="password" name="password" class="form-style signup-field" placeholder="Password" required />
    <i class="input-icon uil uil-lock-alt"></i>
    <i class="uil uil-eye toggle-password" onclick="togglePassword('password', this)" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer;"></i>
  </div>

  <div class="form-group mt-2 position-relative">
    <input type="password" id="confirm_password" name="confirm_password" class="form-style signup-field" placeholder="Confirm Password" required />
    <i class="input-icon uil uil-lock-alt"></i>
    <i class="uil uil-eye toggle-password" onclick="togglePassword('confirm_password', this)" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer;"></i>
  </div>

  <div class="row mt-4">
    <div class="col-12">
      <button type="button" class="btn btn-success w-100" onclick="submitSignup()">Submit</button>
    </div>
  </div>
</div>


                      <!-- Step 4: Success -->
                      <div class="signup-step d-none" id="step-4">
                        <h4 class="mb-4 pb-3 text-success">ðŸŽ‰ Registration Successful</h4>
                        <p>You can now log in with your details.</p>
                        <a href="#" onclick="goToLogin()" class="btn mt-4">Go to Login</a>
                      </div>
                    </form>
                  </div>
                </div>

              </div> <!-- End Wrapper -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  
<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCaMg5hNwMS3-qvAiQupRlc069n3Q9Zy_U",
    authDomain: "buga-business-suites.firebaseapp.com",
    projectId: "buga-business-suites",
    storageBucket: "buga-business-suites.appspot.com",
    messagingSenderId: "427083951264",
    appId: "1:427083951264:web:855f90d29449a5748dadc5",
    measurementId: "G-CRD9BMGJ8P"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Login function
  function loginUser(event) {
    event.preventDefault();
    const email = document.getElementById('logemail').value.trim();
    const pass = document.getElementById('logpass').value.trim();

    auth.signInWithEmailAndPassword(email, pass)
      .then(userCredential => {
        alert("Login successful!");
        // Redirect to dashboard
        // window.location.href = "dashboard.html";
      })
      .catch(error => {
        alert("Login failed: " + error.message);
      });
  }

  // Signup function with Firestore save
  function submitSignup() {
    const form = document.getElementById("signupForm");

    const name = form.querySelector('input[name="name"]').value.trim();
    const phone = form.querySelector('input[name="phone"]').value.trim();
    const email = form.querySelector('input[name="email"]').value.trim();
    const password = form.querySelector('input[name="password"]').value.trim();
    const confirm = form.querySelector('input[name="confirm_password"]').value.trim();

    const business_name = form.querySelector('input[name="business_name"]').value.trim();
    const business_address = form.querySelector('input[name="business_address"]').value.trim();
    const city = form.querySelector('input[name="city"]').value.trim();
    const state = form.querySelector('input[name="state"]').value.trim();
    const business_type = form.querySelector('input[name="business_type"]').value.trim();

    if (!password || !confirm) {
      alert("Please fill both password fields.");
      return;
    }

    if (password !== confirm) {
      alert("Passwords do not match.");
      return;
    }

    auth.createUserWithEmailAndPassword(email, password)
      .then(userCredential => {
        const userId = userCredential.user.uid;

        // Store user profile in Firestore
        return db.collection("users").doc(userId).set({
          name,
          phone,
          email,
          business_name,
          business_address,
          city,
          state,
          business_type,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
      })
      .then(() => {
        document.getElementById("step-3").classList.add("d-none");
        document.getElementById("step-4").classList.remove("d-none");
        adjustCardHeight(4);
      })
      .catch(error => {
        alert("Signup failed: " + error.message);
      });
  }
</script>

<script>
  function togglePassword(fieldId, icon) {
    const input = document.getElementById(fieldId);
    const isPassword = input.type === "password";
    input.type = isPassword ? "text" : "password";
    icon.classList.toggle("uil-eye-slash", isPassword);
    icon.classList.toggle("uil-eye", !isPassword);
  }
</script>





</body>
</html>
